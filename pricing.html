<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pricing & Payment - DigitalCard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        premium: {
                            gold: '#D4AF37',
                            glass: 'rgba(255, 255, 255, 0.1)',
                            dark: '#050505',
                            accent: '#06b6d4',
                            secondary: '#f472b6'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        outfit: ['Outfit', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.08);
            --accent-primary: #6366f1;
            --accent-secondary: #ec4899;
        }

        .glass-morphism {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }

        body {
            /* Vibrant Mesh Gradient Background Matches style.css */
            background:
                radial-gradient(at 0% 0%, hsla(253, 16%, 7%, 1) 0, transparent 50%),
                radial-gradient(at 50% 0%, hsla(225, 39%, 30%, 1) 0, transparent 50%),
                radial-gradient(at 100% 0%, hsla(339, 49%, 30%, 1) 0, transparent 50%),
                radial-gradient(at 0% 50%, hsla(339, 49%, 30%, 1) 0, transparent 50%),
                radial-gradient(at 100% 50%, hsla(253, 16%, 7%, 1) 0, transparent 50%),
                radial-gradient(at 0% 100%, hsla(225, 39%, 30%, 1) 0, transparent 50%),
                radial-gradient(at 50% 100%, hsla(339, 49%, 30%, 1) 0, transparent 50%),
                radial-gradient(at 100% 100%, hsla(253, 16%, 7%, 1) 0, transparent 50%);
            background-color: #0f172a;
            color: #ffffff;
            min-height: 100vh;
        }

        .gradient-text {
            background: linear-gradient(135deg, #fff 0%, #6366f1 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .input-premium {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .input-premium:focus {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--accent-primary);
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.1);
        }

        #mobile-menu {
            transform: translateX(100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        #mobile-menu.active {
            transform: translateX(0);
        }
    </style>
</head>

<body class="font-sans antialiased text-gray-200">
    <!-- Navbar -->
    <nav class="fixed top-0 w-full z-[100] border-b border-white/5 glass-morphism">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <a href="index.html" class="flex items-center gap-3 group">
                    <div
                        class="w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-500 to-blue-600 flex items-center justify-center shadow-lg shadow-cyan-500/20 group-hover:scale-110 transition-transform">
                        <i class="fas fa-id-card text-white text-lg"></i>
                    </div>
                    <span class="text-2xl font-outfit font-bold tracking-tighter text-white">Digital<span
                            class="text-cyan-400">Card</span></span>
                </a>

                <div class="hidden md:flex items-center gap-10">
                    <a href="index.html"
                        class="nav-link text-sm font-medium text-gray-300 hover:text-white transition-colors">Home</a>

                    <a href="features.html"
                        class="nav-link text-sm font-medium text-gray-300 hover:text-white transition-colors">Features</a>
                    <a href="index.html#how-it-works"
                        class="nav-link text-sm font-medium text-gray-300 hover:text-white transition-colors">How it
                        Works</a>
                    <a href="pricing.html"
                        class="nav-link text-sm font-medium text-gray-300 hover:text-white transition-colors">Pricing</a>
                    <div id="auth-buttons" class="flex items-center gap-6">
                        <a href="login.html"
                            class="nav-link text-sm font-medium text-gray-300 hover:text-white transition-colors">Login</a>
                        <a href="register.html"
                            class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-2.5 rounded-full text-sm font-bold transition-all shadow-xl shadow-indigo-500/20 active:scale-95">
                            Sign Up
                        </a>
                    </div>
                    <div id="user-menu" class="hidden flex items-center gap-6">
                        <a href="create.html"
                            class="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-2.5 rounded-full text-sm font-bold transition-all shadow-xl shadow-indigo-500/20 active:scale-95">
                            Dashboard
                        </a>
                        <button id="logout-btn"
                            class="nav-link text-sm font-medium text-gray-300 hover:text-white transition-colors">
                            Logout
                        </button>
                    </div>
                </div>

                <button id="menu-toggle" class="md:hidden text-white p-2">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu" class="fixed inset-0 z-[150] bg-black/95 backdrop-blur-xl md:hidden">
        <div class="flex flex-col items-center justify-center h-full gap-8">
            <button id="menu-close" class="absolute top-6 right-6 text-white text-2xl">
                <i class="fas fa-times"></i>
            </button>
            <a href="index.html" class="text-2xl font-bold text-white hover:text-indigo-400">Home</a>
            <a href="features.html" class="text-2xl font-bold text-white hover:text-indigo-400">Features</a>
            <a href="index.html#how-it-works" class="text-2xl font-bold text-white hover:text-indigo-400">How it
                Works</a>
            <a href="pricing.html" class="text-2xl font-bold text-white hover:text-indigo-400">Pricing</a>
            <div id="mobile-auth-buttons" class="flex flex-col items-center gap-6 w-full">
                <a href="login.html" class="text-2xl font-bold text-white hover:text-indigo-400">Login</a>
                <a href="register.html" class="bg-indigo-600 text-white px-10 py-4 rounded-full text-lg font-bold">
                    Sign Up
                </a>
            </div>
            <div id="mobile-user-menu" class="hidden flex flex-col items-center gap-6 w-full">
                <a href="create.html" class="bg-indigo-600 text-white px-10 py-4 rounded-full text-lg font-bold">
                    Dashboard
                </a>
                <button id="mobile-logout-btn"
                    class="text-2xl font-bold text-white hover:text-indigo-400">Logout</button>
            </div>
        </div>
    </div>


    <!-- Pricing Section -->
    <main class="pt-32 pb-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16 space-y-4">
                <h1 class="text-5xl font-outfit font-extrabold gradient-text leading-tight">Elevate Your Presence.</h1>
                <p class="text-gray-400 text-lg">Choose the plan that fits your professional needs.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-24">
                <!-- Starter -->
                <div
                    class="glass-morphism p-8 rounded-3xl border-white/5 flex flex-col items-center group hover:border-white/10 transition-all">
                    <span class="text-xs font-bold text-gray-500 uppercase tracking-widest mb-6">Starter</span>
                    <div class="text-4xl font-outfit font-bold mb-2">$0</div>
                    <p class="text-gray-500 text-sm mb-8">Free forever</p>
                    <ul class="space-y-4 text-sm text-gray-400 mb-10 text-center">
                        <li>Basic Templates</li>
                        <li>Standard QR Code</li>
                        <li>PNG Export</li>
                    </ul>
                    <a href="create.html"
                        class="w-full py-3 rounded-xl border border-white/10 text-white font-bold hover:bg-white/5 transition-all text-center">Get
                        Started</a>
                </div>

                <!-- Pro -->
                <div
                    class="glass-morphism p-8 rounded-3xl border-indigo-500/30 scale-105 shadow-2xl shadow-indigo-500/10 flex flex-col items-center relative overflow-hidden group">
                    <div
                        class="absolute top-0 right-0 bg-indigo-500 text-white text-[10px] font-bold px-3 py-1 rounded-bl-xl uppercase tracking-tighter">
                        Most Popular</div>
                    <span class="text-xs font-bold text-indigo-400 uppercase tracking-widest mb-6">Professional</span>
                    <div class="text-4xl font-outfit font-bold mb-2">₹1</div>
                    <p class="text-gray-500 text-sm mb-8">One-time payment</p>
                    <ul class="space-y-4 text-sm text-gray-300 mb-10 text-center font-medium">
                        <li>3D Tilt Effects</li>
                        <li>Premium VCard QR</li>
                        <li>HD PNG & PDF Export</li>
                        <li>Custom Themes</li>
                    </ul>
                    <button
                        class="w-full py-4 rounded-xl bg-indigo-600 text-white font-extrabold hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-600/20 active:scale-95"
                        onclick="handlePurchase()">Buy Pro
                        Now</button>
                </div>

                <!-- Elite -->
                <div
                    class="glass-morphism p-8 rounded-3xl border-white/5 flex flex-col items-center group hover:border-white/10 transition-all">
                    <span class="text-xs font-bold text-gray-500 uppercase tracking-widest mb-6">Elite</span>
                    <div class="text-4xl font-outfit font-bold mb-2">$99</div>
                    <p class="text-gray-500 text-sm mb-8">Lifetime access</p>
                    <ul class="space-y-4 text-sm text-gray-400 mb-10 text-center">
                        <li>Priority Support</li>
                        <li>White Labeling</li>
                        <li>Custom Domain Hosting</li>
                        <li>Unlimited Cards</li>
                    </ul>
                    <button
                        class="w-full py-3 rounded-xl border border-white/10 text-white font-bold hover:bg-white/5 transition-all"
                        onclick="handlePurchase()">Upgrade to
                        Elite</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Payment Modal -->
    <div id="payment-modal"
        class="fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md hidden">
        <div
            class="glass-morphism w-full max-w-md p-6 rounded-[2rem] relative animate-slide-up border-white/10 max-h-[95vh] min-h-[550px] overflow-y-auto flex flex-col justify-center">
            <button class="absolute top-4 right-6 text-gray-500 hover:text-white transition-colors"
                onclick="document.getElementById('payment-modal').classList.add('hidden')">
                <i class="fas fa-times text-lg"></i>
            </button>
            <div class="text-center mb-4">
                <h2 class="text-xl font-bold text-white mb-1">Secure Checkout</h2>
                <p class="text-gray-400 text-xs">Experience the premium DigitalCard Pro</p>
            </div>

            <!-- Tabs -->
            <div class="flex p-1 bg-white/5 rounded-xl mb-4">
                <button onclick="switchTab('card')" id="tab-card"
                    class="flex-1 py-1.5 rounded-lg text-xs font-bold transition-all bg-indigo-600 text-white shadow-lg">
                    <i class="fas fa-credit-card mr-1.5"></i>Credit Card
                </button>
                <button onclick="switchTab('qr')" id="tab-qr"
                    class="flex-1 py-1.5 rounded-lg text-xs font-bold transition-all text-gray-400 hover:text-white">
                    <i class="fas fa-qrcode mr-1.5"></i>UPI / QR
                </button>
            </div>

            <!-- Card Form -->
            <form id="form-card" class="space-y-6 block">
                <div class="space-y-2">
                    <label class="text-[10px] font-bold text-indigo-400 uppercase tracking-widest pl-1">Cardholder
                        Name</label>
                    <input type="text" placeholder="Johnathan Doe"
                        class="w-full input-premium rounded-2xl px-5 py-4 outline-none text-white placeholder-gray-600">
                </div>
                <div class="space-y-2">
                    <label class="text-[10px] font-bold text-indigo-400 uppercase tracking-widest pl-1">Card
                        Number</label>
                    <div class="relative">
                        <input type="text" placeholder="#### #### #### ####"
                            class="w-full input-premium rounded-2xl px-5 py-4 outline-none text-white placeholder-gray-600">
                        <i class="fab fa-cc-visa absolute right-5 top-1/2 -translate-y-1/2 text-gray-600 text-xl"></i>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-6">
                    <div class="space-y-2">
                        <label class="text-[10px] font-bold text-indigo-400 uppercase tracking-widest pl-1">Expiry
                            Date</label>
                        <input type="text" placeholder="MM/YY"
                            class="w-full input-premium rounded-2xl px-5 py-4 outline-none text-white placeholder-gray-600 text-center">
                    </div>
                    <div class="space-y-2">
                        <label class="text-[10px] font-bold text-indigo-400 uppercase tracking-widest pl-1">CVV
                            CODE</label>
                        <input type="text" placeholder="***"
                            class="w-full input-premium rounded-2xl px-5 py-4 outline-none text-white placeholder-gray-600 text-center">
                    </div>
                </div>
                <div class="pt-4">
                    <button type="button" onclick="showSuccessModal()"
                        class="w-full bg-indigo-600 text-white py-5 rounded-2xl font-black text-lg uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-xl shadow-indigo-600/30">
                        Pay Securely • ₹1
                    </button>
                </div>
            </form>

            <!-- QR Form -->
            <div id="form-qr" class="space-y-3 hidden text-center">
                <div class="bg-white p-2 rounded-xl inline-block shadow-xl ring-2 ring-white/10">
                    <!-- UPI Link Format: upi://pay?pa=<UPI_ID>&pn=<NAME>&am=<AMOUNT>&cu=INR -->
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=upi://pay?pa=8982622074-2@ybl%26pn=Bhavik%20Sharma%26am=1%26cu=INR"
                        alt="Payment QR" class="w-28 h-28 rounded-md">
                </div>
                <div class="space-y-1">
                    <p class="text-white font-bold text-base">Scan to Pay ₹1</p>
                    <p class="text-gray-400 text-xs">Paying: <span class="text-indigo-400 font-bold">Bhavik
                            Sharma</span></p>
                </div>
                <!-- Time remaining or transaction ID input could go here -->
                <div class="pt-2">
                    <div class="flex items-center justify-center space-x-2 text-indigo-400">
                        <i class="fas fa-circle-notch fa-spin"></i>
                        <span class="text-xs font-bold animate-pulse">Checking payment status...</span>
                    </div>
                </div>
            </div>

            <div
                class="mt-4 flex items-center justify-center gap-4 text-gray-500 text-[9px] uppercase font-bold tracking-widest">
                <span><i class="fas fa-lock mr-1.5"></i>SSL encrypted</span>
                <span>•</span>
                <span><i class="fas fa-shield-halved mr-1.5"></i>100% SECURE</span>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="success-modal"
        class="fixed inset-0 z-[250] flex items-center justify-center p-4 bg-black/90 backdrop-blur-xl hidden">
        <div
            class="glass-morphism w-full max-w-sm p-8 rounded-[2rem] text-center border-green-500/20 animate-slide-up relative">
            <div
                class="w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg shadow-green-500/30">
                <i class="fas fa-check text-3xl text-white"></i>
            </div>
            <h2 class="text-2xl font-bold text-white mb-2">Payment Successful!</h2>
            <p class="text-gray-400 text-sm mb-8">Thank you for your purchase. Your account has been upgraded.</p>
            <button onclick="closeSuccessModal()"
                class="w-full bg-green-500 text-white py-4 rounded-xl font-bold text-sm uppercase tracking-widest hover:bg-green-600 transition-all shadow-lg shadow-green-500/20">
                OK
            </button>
        </div>
    </div>

    <script>
        async function handlePurchase() {
            const user = await DigitalCard.Core.Auth.getUser();
            if (!user) {
                alert('Please login first to subscribe to a premium plan.');
                window.location.href = 'login.html';
                return;
            }
            document.getElementById('payment-modal').classList.remove('hidden');
        }

        function switchTab(tab) {
            const cardForm = document.getElementById('form-card');
            const qrForm = document.getElementById('form-qr');
            const cardTab = document.getElementById('tab-card');
            const qrTab = document.getElementById('tab-qr');

            if (tab === 'card') {
                cardForm.classList.remove('hidden');
                cardForm.classList.add('block');
                qrForm.classList.remove('block');
                qrForm.classList.add('hidden');

                cardTab.classList.add('bg-indigo-600', 'text-white', 'shadow-lg');
                cardTab.classList.remove('text-gray-400', 'hover:text-white');
                qrTab.classList.remove('bg-indigo-600', 'text-white', 'shadow-lg');
                qrTab.classList.add('text-gray-400', 'hover:text-white');

                // Clear any existing simulation timer
                if (window.paymentTimer) clearTimeout(window.paymentTimer);
            } else {
                qrForm.classList.remove('hidden');
                qrForm.classList.add('block');
                cardForm.classList.remove('block');
                cardForm.classList.add('hidden');

                qrTab.classList.add('bg-indigo-600', 'text-white', 'shadow-lg');
                qrTab.classList.remove('text-gray-400', 'hover:text-white');
                cardTab.classList.remove('bg-indigo-600', 'text-white', 'shadow-lg');
                cardTab.classList.add('text-gray-400', 'hover:text-white');

                // Simulate payment check
                if (window.paymentTimer) clearTimeout(window.paymentTimer);
                window.paymentTimer = setTimeout(showSuccessModal, 8000); // 8 seconds delay
            }
        }

        async function showSuccessModal() {
            // Persist Pro status to Supabase
            const { error } = await DigitalCard.Core.Database.updateSubscription(true);

            if (error) {
                console.error('Error updating subscription:', error);
                alert('Payment received, but failed to update profile. Please contact support.');
            }

            document.getElementById('payment-modal').classList.add('hidden');
            document.getElementById('success-modal').classList.remove('hidden');

            // Unlock Pro Features locally as well
            localStorage.setItem('isProUser', 'true');
        }

        function closeSuccessModal() {
            document.getElementById('success-modal').classList.add('hidden');
            // Optional: Redirect to create page
            window.location.href = 'create.html';
        }
    </script>

    <footer class="py-10 border-t border-white/5 text-center">
        <p class="text-gray-500 text-[10px] uppercase font-bold tracking-widest">Handcrafted with precision © 2025
            DigitalCard</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/namespace.js"></script>
    <script src="js/core/database.js"></script>
    <script src="js/core/auth.js"></script>
    <script src="js/ui/ui-manager.js"></script>
    <script src="js/ui/card-renderer.js"></script>
    <script src="js/utils/export.js"></script>
    <script src="js/main.js"></script>
</body>

</html>